function Control({ send, state }) {
  const [recording, setRecording] = React.useState(false);
  const [recorder, setRecorder] = React.useState(null);
  const [chunks, setChunks] = React.useState([]);

  function startRecording() {
    navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {
      const mediaRecorder = new MediaRecorder(stream);
      setRecorder(mediaRecorder);
      setChunks([]);
      mediaRecorder.ondataavailable = (e) => {
        if (e.data.size > 0) setChunks((prev) => [...prev, e.data]);
      };
      mediaRecorder.onstop = () => {
        const blob = new Blob(chunks, { type: "audio/webm" });
        const url = URL.createObjectURL(blob);
        send({ type: "clue", value: url });
      };
      mediaRecorder.start();
      setRecording(true);
    });
  }

  function stopRecording() {
    if (recorder) {
      recorder.stop();
      setRecording(false);
    }
  }

  return (
    <div className="space-y-4">
      <h2 className="text-xl font-bold">Controls</h2>
      <div className="flex gap-2">
        {!recording ? (
          <button
            onClick={startRecording}
            className="px-4 py-2 bg-green-600 rounded"
          >
            üéôÔ∏è Record Clue
          </button>
        ) : (
          <button
            onClick={stopRecording}
            className="px-4 py-2 bg-red-600 rounded"
          >
            ‚èπ Stop Recording
          </button>
        )}
      </div>
      {/* other controls here */}
    </div>
  );
}
